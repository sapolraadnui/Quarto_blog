<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.33">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Paul Raadnui">
<meta name="dcterms.date" content="2026-01-16">
<meta name="description" content="How data science and machine learning can help estimate earthquake risk using historical seismic data.">

<title>From Past Earthquake Data to Early Earthquake Warnings – Paul’s Blog</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-ea385d0e468b0dd5ea5bf0780b1290d9.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-fc539113232677d296c547e50173fa21.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Paul’s Blog</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/sapolraadnui"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">From Past Earthquake Data to Early Earthquake Warnings</h1>
                  <div>
        <div class="description">
          How data science and machine learning can help estimate earthquake risk using historical seismic data.
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">data science</div>
                <div class="quarto-category">machine learning</div>
                <div class="quarto-category">earthquakes</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Paul Raadnui </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">January 16, 2026</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p>As someone who had done undergraduate research on earthquakes, I had always wondered what it would feel like to experience an earthquake. Would it feel like an earthquake simulator I had been in? How long would it last? Little did I know that I would be experiencing a big one in 2025.</p>
<p>Working on the 26th floor in Bangkok, Thailand on March 28th, 2025, I had just returned from lunch with my colleagues. As soon as I started working on my laptop, someone screamed, “Earthquake! Earthquake! Get under your table!” Initially, I thought it was a joke since I, who was born and raised in Bangkok, had never felt an earthquake there. Two seconds later, the building started shaking so violently that I could see the walls moving in waves, and all I could hear were items dropping from shelves and tables along with people screaming in fear. I was waiting for it to stop, but it seemed to keep going forever. However, it actually lasted only one minute, which felt like the longest minute of my life.</p>
<p>As we evacuated the building after the shaking stopped, we learned that it was caused by a 7.7-magnitude earthquake with the epicenter in Myanmar that sent tremors all the way into Thailand, as illustrated in <a href="#fig-myanmar-eq" class="quarto-xref">Figure&nbsp;1</a>. It was the most powerful quake to hit Myanmar and Thailand since 1912.</p>
<div id="fig-myanmar-eq" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-myanmar-eq-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="eq-myanmar.avif" class="img-fluid figure-img"></p>
<figcaption>Location of the earthquake epicenter and Bangkok</figcaption>
</figure>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig quarto-uncaptioned" id="fig-myanmar-eq-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1
</figcaption>
</figure>
</div>
<p>Despite Bangkok being nearly 600 miles away from the epicenter, the city experienced widespread shaking and significant damage. The most severe destruction was the total collapse of a skyscraper under construction, as shown in the YouTube video below. According to World Vision, the death toll has reached 3,600, with over 5,000 people injured (<span class="citation" data-cites="worldvision2025myanmar">World Vision (<a href="#ref-worldvision2025myanmar" role="doc-biblioref">2025</a>)</span>).</p>
<div style="text-align:center;">
<p><iframe width="700" height="400" src="https://www.youtube.com/embed/I8av8DQ2AIA" title="YouTube video player" frameborder="0" allowfullscreen=""> </iframe></p>
</div>
<p>At this point, you might be wondering: would big earthquakes like this be possible to predict in advance? Could AI help assess earthquake risk so that governments can warn people beforehand to minimize losses? Before we get to that, let’s make sure we are all on the same page about how earthquakes happen.</p>
<section id="how-earthquakes-happen" class="level1">
<h1>How Earthquakes Happen</h1>
<p>Earthquakes happen when stress builds up between large pieces of the Earth’s crust, known as tectonic plates, and is suddenly released. This energy release leads to ground shaking, and the magnitude of an earthquake depends on how much energy is released.</p>
<p>To simplify it further, <a href="#fig-simplified-earthquake" class="quarto-xref">Figure&nbsp;2</a> (<span class="citation" data-cites="bbcbitesizeearthquake">BBC Bitesize (<a href="#ref-bbcbitesizeearthquake" role="doc-biblioref">2025</a>)</span>) shows how earthquakes start underground, where rocks suddenly shift and release energy. This energy travels outward as waves through the ground, causing the surface to shake, with the strongest shaking usually happening near the epicenter.</p>
<div id="fig-simplified-earthquake" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-simplified-earthquake-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="simplified-eq.png" class="img-fluid figure-img"></p>
<figcaption>Simplified illustration of how earthquakes occur</figcaption>
</figure>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig quarto-uncaptioned" id="fig-simplified-earthquake-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;2
</figcaption>
</figure>
</div>
<p>The Earth comprises more than seven major tectonic plates and up to 50 minor tectonic plates. All tectonic plates move in different directions at rates of only a few centimeters per year. As they keep moving, stress builds up between adjacent plates, and once it is released, an earthquake occurs. Believe it or not, earthquakes happen every day across the Earth. <a href="#fig-usgs" class="quarto-xref">Figure&nbsp;3</a> shows all earthquakes of magnitude 4.5 or more in the past 30 days. Feel free to explore this USGS dashboard to see when and where each earthquake occurred.</p>
<div id="fig-usgs" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-usgs-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="usgs-20260114.png" class="img-fluid figure-img"></p>
<figcaption>Earthquakes of magnitude 4.5 or more in the past 30 days (as of January 14th, 4:00 PM PDT)</figcaption>
</figure>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig quarto-uncaptioned" id="fig-usgs-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;3
</figcaption>
</figure>
</div>
<p>You can explore recent seismic activity using the <a href="https://earthquake.usgs.gov/earthquakes/map/?extent=-72.60712,-153.98438&amp;extent=78.13449,250.3125&amp;range=month&amp;magnitude=4.5&amp;baseLayer=satellite&amp;list=false&amp;settings=true">interactive USGS earthquake dashboard</a>.</p>
</section>
<section id="can-we-predict-earthquakes" class="level1">
<h1>Can We Predict Earthquakes?</h1>
<p>Despite these processes being studied for decades, predicting exactly when a future earthquake will occur is still impossible. We do not know precisely when accumulated subsurface stress will be released, but we do know where earthquakes are more likely to happen. This is where data science can be valuable.</p>
<p>So, can machine learning predict earthquakes? The honest answer is no, or at least not with certainty. However, machine learning can do something just as valuable: help us understand when the risk is higher and give people time to prepare.</p>
<section id="a-real-world-example-of-how-ml-models-can-help" class="level2">
<h2 class="anchored" data-anchor-id="a-real-world-example-of-how-ml-models-can-help">A Real-World Example of How ML Models Can Help</h2>
<p>One academic study (<span class="citation" data-cites="mukherjee2025himalayan">Mukherjee (<a href="#ref-mukherjee2025himalayan" role="doc-biblioref">2025</a>)</span>) used machine learning algorithms to estimate earthquake likelihoods, making it worth discussing from a data science perspective. This approach is similar to how we treat many real-world classification problems: we may never make perfect predictions, but we can estimate probabilities. Rather than asking, “When and where will the next earthquake happen?”, the researchers asked, “Based on patterns in past earthquakes, how likely is a large earthquake to occur in a certain area?”</p>
<div id="fig-himalayan" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-himalayan-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="himalayan-eq.png" class="img-fluid figure-img"></p>
<figcaption>Earthquake events used in the Himalayan ML study (1803–2023)</figcaption>
</figure>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig quarto-uncaptioned" id="fig-himalayan-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;4
</figcaption>
</figure>
</div>
<p>The likelihood of earthquakes with magnitudes of 4.0, 4.5, 5.0, and 5.5 occurring 7, 10, 15, and 30 days ahead was assessed using different machine learning models. Earthquake data from events between 1803 and 2023 were used, as shown in <a href="#fig-himalayan" class="quarto-xref">Figure&nbsp;4</a>.</p>
</section>
</section>
<section id="combining-different-signals-to-increase-predictive-power" class="level1">
<h1>Combining Different Signals to Increase Predictive Power</h1>
<p>When signals are treated independently, they are often weak predictors of earthquakes. However, combining multiple features reveals patterns that tend to occur before earthquakes, such as changes in energy release, depth, and seismic activity rates.</p>
<p>To determine which signals mattered most, the authors used Boruta-SHAP, a feature-selection method that balances predictive performance with interpretability.</p>
<section id="a-simple-way-to-think-about-boruta-shap" class="level3">
<h3 class="anchored" data-anchor-id="a-simple-way-to-think-about-boruta-shap">A Simple Way to Think About Boruta-SHAP</h3>
<p>Suppose you are trying to predict whether students will pass a course using features such as GPA, quiz scores, attendance, weight, and height. Boruta-SHAP asks a simple question for each feature: “If I randomly shuffled this variable, would the model perform worse?” If the answer is yes, the variable stays. If not, it is likely just noise and can be removed. In this case, weight and height would have little relevance and would be eliminated.</p>
<p>Similarly, this earthquake study found that energy-related features, temporal seismic patterns, and depth-related indicators were consistently the most important. This also explains why nonlinear models such as ANN and XGBoost performed best, as they are better at capturing interactions between these signals.</p>
</section>
</section>
<section id="why-this-matters-outside-the-model" class="level1">
<h1>Why This Matters Outside the Model</h1>
<div id="fig-accuracy" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-accuracy-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="accuracy.png" class="img-fluid figure-img"></p>
<figcaption>Accuracy scores on the test dataset obtained from six different ML models</figcaption>
</figure>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig quarto-uncaptioned" id="fig-accuracy-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;5
</figcaption>
</figure>
</div>
<p>Although ANN and XGBoost achieved accuracy scores of approximately 80–95%, as shown in <a href="#fig-accuracy" class="quarto-xref">Figure&nbsp;5</a>, the most important takeaway is not the accuracy itself, but how the results can be used. Even a few days of elevated risk awareness can:</p>
<ul>
<li>Help governments prepare emergency responses</li>
<li>Guide infrastructure inspections</li>
<li>Improve public readiness</li>
<li>Complement real-time seismic early warning systems</li>
</ul>
<p>Early alerts may provide only seconds or minutes of warning, but they can save lives. Countries like Japan, where earthquakes occur frequently, have already implemented such systems, which have been shown to reduce damage and improve safety (<span class="citation" data-cites="foxnews2017earlywarning">Fox News (<a href="#ref-foxnews2017earlywarning" role="doc-biblioref">2017</a>)</span>). Studies like this suggest that longer-term machine learning–based risk assessments could further strengthen these efforts.</p>
<div id="fig-eq-warning" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-eq-warning-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="eq-warning.png" class="img-fluid figure-img"></p>
<figcaption>Early Earthquake Warning System</figcaption>
</figure>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig quarto-uncaptioned" id="fig-eq-warning-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;6
</figcaption>
</figure>
</div>
</section>
<section id="key-takeaways" class="level1">
<h1>Key Takeaways</h1>
<ul>
<li>Earthquakes cannot be predicted exactly, but their likelihood can be estimated.</li>
<li>Machine learning excels at detecting subtle, nonlinear patterns in seismic history.</li>
<li>Feature quality often matters more than model complexity, with ANN and XGBoost performing best.</li>
</ul>
<p>Machine learning models still have important limitations. They rely on historical data that may not fully represent future conditions and may produce false alarms or missed events. ML should support, not replace, geophysical expertise, which remains essential.</p>
<p>Even imperfect predictions can reduce damage and save lives. In summary, while data science cannot predict earthquakes with certainty, it improves our ability to assess risk, issue early warnings, and take preventive measures so that societies are more resilient to future earthquakes.</p>
</section>
<section id="final-thoughts" class="level1">
<h1>Final Thoughts</h1>
<p>Thinking back to my experience in Bangkok, I often wonder what might have happened if a machine learning–based warning system had alerted people in Thailand and Myanmar days in advance. Early warnings could have reduced casualties and mitigated some of the damage.</p>
<p>As data scientists, we are often asked to build models for systems we do not fully understand. Earthquake likelihood prediction is one such example. This study shows that responsible machine learning is not about claiming certainty, but about providing better information under uncertainty so we can prepare for what is to come.</p>
<p>And often, that is enough to make a real-world difference.</p>



</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-bbcbitesizeearthquake" class="csl-entry" role="listitem">
BBC Bitesize. 2025. <span>“How Earthquakes Happen.”</span> <a href="https://www.bbc.co.uk/bitesize/guides/zp46sg8/revision/1" class="uri">https://www.bbc.co.uk/bitesize/guides/zp46sg8/revision/1</a>. 2025. <a href="https://www.bbc.co.uk/bitesize/guides/zp46sg8/revision/1">https://www.bbc.co.uk/bitesize/guides/zp46sg8/revision/1</a>.
</div>
<div id="ref-foxnews2017earlywarning" class="csl-entry" role="listitem">
Fox News. 2017. <span>“Earthquake Early-Warning Systems Finally Becoming a Reality.”</span> <a href="https://www.foxnews.com/tech/earthquake-early-warning-systems-finally-becoming-a-reality" class="uri">https://www.foxnews.com/tech/earthquake-early-warning-systems-finally-becoming-a-reality</a>. 2017. <a href="https://www.foxnews.com/tech/earthquake-early-warning-systems-finally-becoming-a-reality">https://www.foxnews.com/tech/earthquake-early-warning-systems-finally-becoming-a-reality</a>.
</div>
<div id="ref-mukherjee2025himalayan" class="csl-entry" role="listitem">
Mukherjee, B. 2025. <span>“Earthquake Prediction Using Machine Learning Perspectives in Himalayan Seismic Belt and Its Surroundings.”</span> <em>Journal of Asian Earth Sciences</em>. <a href="https://ui.adsabs.harvard.edu/abs/2025JAESc.29306764M/">https://ui.adsabs.harvard.edu/abs/2025JAESc.29306764M/</a>.
</div>
<div id="ref-worldvision2025myanmar" class="csl-entry" role="listitem">
World Vision. 2025. <span>“Myanmar Earthquake: Facts, FAQs, and How to Help.”</span> <a href="https://www.worldvision.org/disaster-relief-news-stories/myanmar-earthquake-facts-faqs-how-to-help" class="uri">https://www.worldvision.org/disaster-relief-news-stories/myanmar-earthquake-facts-faqs-how-to-help</a>. 2025. <a href="https://www.worldvision.org/disaster-relief-news-stories/myanmar-earthquake-facts-faqs-how-to-help">https://www.worldvision.org/disaster-relief-news-stories/myanmar-earthquake-facts-faqs-how-to-help</a>.
</div>
</div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/sapolraadnui\.quarto\.pub\/blog_sapolr");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>